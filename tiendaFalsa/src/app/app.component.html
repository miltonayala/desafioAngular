
<!-- ************************************************************
     SECCI√ìN: Header (nuevo)
     ************************************************************ -->
<header class="app-header">
  <div class="header-inner">
    <!-- Logo / t√≠tulo a la izquierda -->
    <div class="logo">#LaTiendaFalsa</div>

    <!-- Menu simple a la derecha -->
    <nav class="header-nav" role="navigation" aria-label="Main menu">
      <ul>
        <li
          *ngFor="let m of headerMenuItems"
          (click)="onSelectMenu(m.label)"
          [class.active]="selectedMenu === m.label"
        >
          <a href="#" (click)="$event.preventDefault()">{{ m.label }}</a>
        </li>
      </ul>
    </nav>

    <div class="carrito-widget" (click)="openModalCarrito()">
      <span class="carrito-icon">üõí</span>
      <span class="carrito-badge" *ngIf="getTotalItemsCarrito() > 0">
        {{ getTotalItemsCarrito() }}
      </span>
      <span class="carrito-total">${{ getTotalCarrito() }}</span>
    </div>
  </div>
</header>

<!-- ************************************************************
     SECCI√ìN: T√≠tulo principal
     ************************************************************ -->
<h1>#LaTiendaFalsa</h1>


<!-- ************************************************************
     SECCI√ìN: Loading message mientras se hace fetch del API
     ************************************************************ -->

<div *ngIf="loadingProductos">
  <p>Cargando productos...</p>
</div>

<div class="productos-grid" *ngIf="!loadingProductos">
  <div class="product-card" *ngFor="let producto of productosList">
    <div class="card-image">
      <img [src]="producto.image" [alt]="producto.title" />
    </div>
    
    <div class="card-content">
      <h3 class="card-title">{{ producto.title }}</h3>
      <p class="card-price">${{ producto.price }}</p>
      
      <div class="card-actions">
        <button class="btn-detalles" (click)="openDetallesModal(producto)">
          Ver info
        </button>
        <button class="btn-add-card" (click)="addToCarrito(producto)">
          üõí
        </button>
      </div>
    </div>
  </div>
</div>

<footer class="app-footer">
  <div class="footer-inner">
    <small>{{ footerText }}</small>
  </div>
</footer>

<div class="modal-overlay" *ngIf="showModalCarrito" (click)="closeModalCarrito()">
  <div class="modal-carrito" (click)="$event.stopPropagation()">
    
    <div class="modal-header">
      <h2>Mi Carrito</h2>
      <button class="btn-close" (click)="closeModalCarrito()">‚úñ</button>
    </div>

    <div class="modal-body">
      
      <div *ngIf="cartItems.length === 0" class="carrito-vacio">
        <p>Tu carrito est√° vac√≠o</p>
      </div>

      <div *ngIf="cartItems.length > 0" class="carrito-items">
        <div class="carrito-item" *ngFor="let item of cartItems">
          
          <img [src]="item.product.image" width="60" />

          <div class="item-info">
            <strong>{{ item.product.title }}</strong>
            <p>Precio unitario: ${{ item.product.price }}</p>
          </div>

          <div class="item-controls">
            <button (click)="updateQuantity(item.product.id, item.quantity - 1)">-</button>
            <span>{{ item.quantity }}</span>
            <button (click)="updateQuantity(item.product.id, item.quantity + 1)">+</button>
          </div>

          <div class="item-subtotal">
            <strong>${{ getSubtotal(item) }}</strong>
          </div>

          <button class="btn-remove" (click)="removeFromCarrito(item.product.id)">
            üóëÔ∏è
          </button>

        </div>
      </div>

    </div>

    <div class="modal-footer" *ngIf="cartItems.length > 0">
      <div class="total-general">
        <strong>TOTAL A PAGAR:</strong>
        <span class="total-amount">${{ getTotalCarrito() }}</span>
      </div>
      <button class="btn-checkout">Proceder al Pago</button>
    </div>

  </div>
</div>

<div class="modal-overlay" *ngIf="showModalDetalles" (click)="closeDetallesModal()">
  <div class="modal-detalles" (click)="$event.stopPropagation()">
    
    <div class="modal-header">
      <h2>Detalles del Producto</h2>
      <button class="btn-close" (click)="closeDetallesModal()">‚úñ</button>
    </div>

    <div class="modal-body" *ngIf="selectedProduct">
      <div class="detalles-layout">
        <div class="detalles-image">
          <img [src]="selectedProduct.image" [alt]="selectedProduct.title" />
        </div>
        
        <div class="detalles-info">
          <h3>{{ selectedProduct.title }}</h3>
          <p class="detalles-category">
            <strong>Categor√≠a:</strong> {{ selectedProduct.category }}
          </p>
          <p class="detalles-description">{{ selectedProduct.description }}</p>
          <p class="detalles-id">
            <strong>ID:</strong> {{ selectedProduct.id }}
          </p>
          <p class="detalles-price">${{ selectedProduct.price }}</p>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-cancelar" (click)="closeDetallesModal()">
        Cancelar
      </button>
      <button class="btn-agregar-modal" (click)="addToCarritoFromModal()">
        Agregar al Carrito
      </button>
    </div>

  </div>
</div>

