
<!-- ************************************************************
     SECCI√ìN: Header (nuevo)
     ************************************************************ -->
<header class="app-header">
  <div class="header-inner">
    <!-- Logo / t√≠tulo a la izquierda -->
    <div class="logo"><span class="la fugaz-one-regular">#La</span><span class="tienda fugaz-one-regular">Tienda</span><span class="la fugaz-one-regular">Falsa</span></div>

    <!-- Menu simple a la derecha -->
    <nav class="header-nav" role="navigation" aria-label="Main menu">
      <ul>
        <li
          *ngFor="let m of headerMenuItems"
          (click)="onSelectMenu(m.label)"
          [class.active]="selectedMenu === m.label"
        >
          <a href="#" (click)="$event.preventDefault()">{{ m.label }}</a>
        </li>
      </ul>
    </nav>

    <div class="carrito-widget" (click)="openModalCarrito()">
      <span class="carrito-icon">üõí</span>
      <span class="carrito-badge" *ngIf="getTotalItemsCarrito() > 0">
        {{ getTotalItemsCarrito() }}
      </span>
      <span class="carrito-total">${{ getTotalCarrito() }}</span>
    </div>
  </div>
</header>

<!-- ************************************************************
     SECCI√ìN: T√≠tulo principal + filtro de categor√≠a
     ************************************************************ -->
<div class="flex items-center justify-between p-4">
  <h1 class="font-semibold text-sm">Seleccionar categor√≠a:</h1>

  <select [(ngModel)]="selectedCategory" class="py-1 px-4 border-solid border border-[#333] text-sm">
    <option *ngFor="let c of categorias" [ngValue]="c">{{ c }}</option>
  </select>
</div>

<h2 class="font-semibold text-sm p-4 border-t border-dashed border-[#ddd]">Productos de la categor√≠a: <span class="underline">{{ selectedCategory }}</span></h2>


<!-- ************************************************************
     SECCI√ìN: Loading message mientras se hace fetch del API
     ************************************************************ -->

<div *ngIf="loadingProductos">
  <p>Cargando productos...</p>
</div>


<!-- ************************************************************
     SECCI√ìN: Lista de productos
     ************************************************************ -->

<ul *ngIf="!loadingProductos">
  <li *ngFor="let item of productosFiltrados">
    <img [src]="item.image" width="80" />

    <strong>{{ item.title }}</strong> ‚Äî ${{ item.price }}

    <button class="btn-add-carrito" (click)="addToCarrito(item)">
      Agregar al carrito
    </button>
  </li>
</ul>


<footer class="app-footer">
  <div class="footer-inner">
    <small>{{ footerText }}</small>
  </div>
</footer>

<div class="modal-overlay" *ngIf="showModalCarrito" (click)="closeModalCarrito()">
  <div class="modal-carrito" (click)="$event.stopPropagation()">
    
    <div class="modal-header">
      <h2>Mi Carrito</h2>
      <button class="btn-close" (click)="closeModalCarrito()">‚úñ</button>
    </div>

    <div class="modal-body">
      
      <div *ngIf="cartItems.length === 0" class="carrito-vacio">
        <p>Tu carrito est√° vac√≠o</p>
      </div>

      <div *ngIf="cartItems.length > 0" class="carrito-items">
        <div class="carrito-item" *ngFor="let item of cartItems">
          
          <img [src]="item.product.image" width="60" />

          <div class="item-info">
            <strong>{{ item.product.title }}</strong>
            <p>Precio unitario: ${{ item.product.price }}</p>
          </div>

          <div class="item-controls">
            <button (click)="updateQuantity(item.product.id, item.quantity - 1)">-</button>
            <span>{{ item.quantity }}</span>
            <button (click)="updateQuantity(item.product.id, item.quantity + 1)">+</button>
          </div>

          <div class="item-subtotal">
            <strong>${{ getSubtotal(item) }}</strong>
          </div>

          <button class="btn-remove" (click)="removeFromCarrito(item.product.id)">
            üóëÔ∏è
          </button>

        </div>
      </div>

    </div>

    <div class="modal-footer" *ngIf="cartItems.length > 0">
      <div class="total-general">
        <strong>TOTAL A PAGAR:</strong>
        <span class="total-amount">${{ getTotalCarrito() }}</span>
      </div>
      <button class="btn-checkout">Proceder al Pago</button>
    </div>

  </div>
</div>
